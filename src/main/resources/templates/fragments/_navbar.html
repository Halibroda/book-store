<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<body>
<header th:fragment="navbar">
    <nav class="nav">
        <a class="brand" th:href="@{/}" th:text="#{app.title}">Book Store</a>
        <div class="nav__spacer"></div>

        <a sec:authorize="hasRole('CLIENT')" th:href="@{/clients/me}" th:text="#{nav.profile}">Profile</a>
        <a sec:authorize="hasRole('CLIENT')" th:href="@{/order/cart}" th:text="#{cart.title}">Cart</a>
        <a sec:authorize="hasRole('CLIENT')" th:href="@{/order}" th:text="#{orders.my}">My orders</a>

        <a sec:authorize="hasRole('EMPLOYEE')" th:href="@{/book/new}" th:text="#{books.add}">Add book</a>
        <a sec:authorize="hasRole('EMPLOYEE')" th:href="@{/book/manage}" th:text="#{books.manage}">Manage books</a>
        <a sec:authorize="hasRole('EMPLOYEE')" th:href="@{/clients/manage}" th:text="#{clients.manage}">Customers</a>
        <a sec:authorize="hasRole('EMPLOYEE')" th:href="@{/order/manage}" th:text="#{orders.manage}">Manage orders</a>

        <a th:classappend="${#locale.language=='en'} ? 'active' : ''" th:href="@{?lang=en}">EN</a>
        <span class="muted">|</span>
        <a th:classappend="${#locale.language=='uk'} ? 'active' : ''" th:href="@{?lang=uk}">UK</a>

        <div class="nav__auth">
      <span sec:authorize="isAnonymous()">
          <a class="btn btn--ghost" th:href="@{/register}" th:text="#{auth.register}">Register</a>
                  <!-- СТОРІНКА логіна -->
          <a class="btn btn--ghost" th:href="@{/login}" th:text="#{nav.login}">Log in</a>
      </span>
        <span sec:authorize="isAuthenticated()">
          <form th:action="@{/auth/logout}" method="post" class="inline">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button class="btn btn--ghost" th:text="#{nav.logout}">Log out</button>
          </form>
        </span>
        </div>
    </nav>
</header>
</body>
</html>
