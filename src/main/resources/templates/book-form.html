<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head th:replace="~{fragments/_head :: head(#{books.form})}"></head>
<body>
<div th:replace="~{fragments/_navbar :: navbar}"></div>

<main class="container container--narrow">
    <h1 th:text="#{books.form}">Book form</h1>

    <form class="form" th:action="@{/books}" th:object="${book}" method="post" sec:authorize="hasAnyRole('EMPLOYEE','ADMIN')">
        <div class="form__row">
            <label th:for="${#ids.prev('name')}" th:text="#{book.title}">Title</label>
            <input th:field="*{name}">
            <p class="error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">err</p>
        </div>

        <div class="form__row">
            <label th:text="#{book.author}">Author</label>
            <input th:field="*{author}">
            <p class="error" th:if="${#fields.hasErrors('author')}" th:errors="*{author}">err</p>
        </div>

        <div class="form__row">
            <label th:text="#{book.price}">Price</label>
            <input type="number" step="0.01" min="0" th:field="*{price}">
            <p class="error" th:if="${#fields.hasErrors('price')}" th:errors="*{price}">err</p>
        </div>

        <div class="form__row">
            <label th:text="#{filter.language}">Language</label>
            <input th:field="*{language}">
            <p class="error" th:if="${#fields.hasErrors('language')}" th:errors="*{language}">err</p>
        </div>

        <div class="form__row">
            <label th:text="#{filter.ageGroup}">Age group</label>
            <input th:field="*{ageGroup}">
            <p class="error" th:if="${#fields.hasErrors('ageGroup')}" th:errors="*{ageGroup}">err</p>
        </div>

        <div class="form__row">
            <label th:text="#{filter.genre}">Genre</label>
            <input th:field="*{genre}">
            <p class="error" th:if="${#fields.hasErrors('genre')}" th:errors="*{genre}">err</p>
        </div>

        <div class="form__row">
            <label>Pages</label>
            <input type="number" min="1" th:field="*{pages}">
            <p class="error" th:if="${#fields.hasErrors('pages')}" th:errors="*{pages}">err</p>
        </div>

        <div class="form__row">
            <label>Publication date</label>
            <input type="date" th:field="*{publicationDate}">
            <p class="error" th:if="${#fields.hasErrors('publicationDate')}" th:errors="*{publicationDate}">err</p>
        </div>

        <div class="form__row">
            <label>Characteristics</label>
            <input th:field="*{characteristics}">
            <p class="error" th:if="${#fields.hasErrors('characteristics')}" th:errors="*{characteristics}">err</p>
        </div>

        <div class="form__row">
            <label>Description</label>
            <input th:field="*{description}">
            <p class="error" th:if="${#fields.hasErrors('description')}" th:errors="*{description}">err</p>
        </div>

        <div class="form__actions">
            <a class="btn btn--ghost" th:href="@{/}" th:text="#{common.cancel}">Cancel</a>
            <button class="btn" type="submit" th:text="#{common.save}">Save</button>
        </div>

        <th:block th:if="${_csrf != null}">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        </th:block>
    </form>
</main>
</body>
</html>
